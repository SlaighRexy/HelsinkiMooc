{"version":3,"sources":["components/Persons.js","components/PersonForm.js","components/Filter.js","services/phonebook.js","components/Notification.js","components/ErrorNotification.js","App.js","index.js"],"names":["Persons","name","number","deletePerson","onClick","PersonForm","props","onSubmit","addPhonebook","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","Filter","newSearch","handleFilterChange","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Notification","message","className","ErrorNotification","App","useState","persons","setPersons","setNewName","setNewNumber","setNewSearch","result","setResult","setMessage","errorMessage","setErrorMessage","useEffect","phoneService","personToRemove","find","person","window","confirm","map","catch","error","setTimeout","filter","event","target","newFilter","toLowerCase","startsWith","length","preventDefault","addNewPerson","forEach","item","filterPhoneBook","p","changedNumber","concat","i","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0f09bb29.chunk.js","sourcesContent":["import React from 'react'; \r\n\r\nconst Persons  = ({name, number, deletePerson}) => {\r\n  \r\n    return(      \r\n      <div> \r\n        {name} {number} <button onClick={deletePerson}>delete</button>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Persons","import React from 'react';\r\n\r\nconst PersonForm = (props) =>{\r\n \r\n    return (\r\n    <form onSubmit={props.addPhonebook}>\r\n        <div>\r\n          name: <input value={props.newName} onChange={props.handleNameChange} />\r\n        </div>\r\n        <div>\r\n          number: <input value={props.newNumber} onChange={props.handleNumberChange} />\r\n        </div>\r\n        <div> \r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n    </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'; \r\n\r\nconst Filter  = ({newSearch, handleFilterChange}) => {\r\n  \r\n    return(      \r\n        <div>\r\n            Filter shown with: <input value={newSearch} onChange={handleFilterChange} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl).then(response => response.data )\r\n}\r\n\r\nconst create = newObject => {\r\n    return axios.post(baseUrl, newObject).then(response => response.data)\r\n}\r\n  \r\nconst update = (id, newObject) => {\r\n    return axios.put(`${baseUrl}/${id}`, newObject).then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n    return axios.delete(`${baseUrl}/${id}`).then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, remove }","import React from 'react';\r\n\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"success\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default Notification","import React from 'react';\r\n\r\nconst ErrorNotification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  export default ErrorNotification"," import React, { useState, useEffect } from 'react'\n import Persons from './components/Persons'\n import PersonForm from './components/PersonForm'\n import Filter from './components/Filter'\n import phoneService from './services/phonebook' \n import Notification from './components/Notification'\n import ErrorNotification from './components/ErrorNotification'\n import './index.css'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newSearch, setNewSearch ] = useState('enter name to search...') \n  const [ result, setResult ] = useState([])\n  const [ message, setMessage ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState('')\n \n  \n  useEffect(() =>{\n\n    phoneService.getAll()\n      .then(result =>{\n        setPersons(result)\n      })\n\n  },[])\n\n  const addPhonebook  = (event) => {\n    event.preventDefault();\n     \n    let addNewPerson = false\n     \n    persons.forEach( item => addNewPerson = item.name.toLowerCase() === newName.toLowerCase() )\n    \n    \n    if(!addNewPerson) {   \n\n      const phonebookObject = { \n        name: newName,\n        number: newNumber\n      };\n  \n      phoneService.create(phonebookObject)\n      .then(result => {\n        setPersons(persons.concat(result))        \n        setNewName('')\n        setNewNumber('')\n        setResult([])\n        setMessage(`Added ${newName}`)\n      }) \n      .catch(error => { \n        setErrorMessage(error.response.data.error)\n      })\n\n    }else{\n      const cnf = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n      \n      if(cnf){\n        const filterPhoneBook = persons.filter(p => p.name.toLowerCase() === newName.toLowerCase())\n        const changedNumber = { ...filterPhoneBook[0], number: newNumber }\n        const id = filterPhoneBook[0]['id'] \n        \n        \n        phoneService.update(id, changedNumber).then(response =>{\n          setPersons(persons.map(person => person.id !== id ? person : response))\n        })\n        .catch(error => { \n          setErrorMessage(error.response.data.error)\n          //setErrorMessage(`information of '${filterPhoneBook[0].name}' has already been removed from server`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n          setPersons(persons.filter(person => person.id !== id))\n        })\n      }\n    }\n     \n  }\n \n\n  const deletePerson = (id) =>{ \n\n    const personToRemove = persons.find(person => person.id === id)\n     \n    const message = window.confirm(`Delete ${personToRemove.name} from phonebook`)\n    \n    if(message) {\n      phoneService.remove(id).then(response =>{\n        setPersons(persons.map(person => person.id !== id ? person : response))\n        setResult([]) \n      })\n      .catch(error => {\n        setErrorMessage(`information of '${personToRemove.name}' has already been removed from server`)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n        setPersons(persons.filter(person => person.id !== id))\n        setResult([])\n      })\n    }\n  }\n\n  \n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => { \n    setNewNumber(event.target.value)\n  }\n  \n  const handleFilterChange = (event) =>{\n\n    setNewSearch(event.target.value)\n    if(event.target.value !== ''){\n      const newFilter = persons.filter(person => person.name.toLowerCase().startsWith(event.target.value.toLowerCase()))\n      if(newFilter.length > 0){\n        setResult(newFilter)\n      }\n    }\n    else{\n      setResult([])\n    }\n    \n  }  \n\n  return ( \n       <div>\n          <h2>Phonebook</h2>\n          {\n            message ==='' ? '' : <Notification message={message} />\n          }\n          {\n            errorMessage === '' ? '' : <ErrorNotification message={errorMessage} />\n          }\n          <Filter newSearch={newSearch} handleFilterChange={handleFilterChange} />\n\n          <h3>Add a new</h3>\n\n          <PersonForm addPhonebook={addPhonebook} newName={newName} newNumber={newNumber} handleNumberChange={handleNumberChange} handleNameChange={handleNameChange}  />\n\n          <h3>Numbers</h3>\n          \n          {result.length > 0 ?\n          result.map((person, i) =>\n            <Persons key={i} name={person.name} number={person.number} \n              deletePerson={() =>  deletePerson(person.id)} />\n          )\n          :\n            persons.map((person, i) =>\n              <Persons key={i} name={person.name} number={person.number} \n                deletePerson={() =>  deletePerson(person.id)} />\n            )\n          }\n    \n        </div> \n  )\n}\n\nexport default App; \n","import React from 'react';\nimport ReactDOM from 'react-dom'; \nimport App from './App'; \n\nReactDOM.render( \n    <App /> ,\n  document.getElementById('root')\n);\n \n"],"sourceRoot":""}